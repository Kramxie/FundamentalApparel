/**
 * Admin Panel - Mobile Responsive Styles
 * Fixes layout issues on mobile devices
 */

/* ============================================
   Base Mobile Fixes
   ============================================ */

/* Prevent horizontal overflow on mobile */
html, body {
    overflow-x: hidden;
    max-width: 100vw;
}

* {
    box-sizing: border-box;
}

/* Admin main content area */
.admin-main {
    min-height: 100vh;
    width: 100%;
    overflow-x: hidden;
    box-sizing: border-box;
}

@media (max-width: 768px) {
    .admin-main {
        padding-bottom: 2rem;
        max-width: 100vw;
        overflow-x: hidden;
    }
    
    /* Fix all containers with p-6 padding */
    .p-6 {
        padding: 1rem !important;
    }
    
    /* Fix fixed width inputs - w-80 = 320px which overflows */
    .w-80 {
        width: 100% !important;
        max-width: 100% !important;
    }
    
    /* Fix flex containers to wrap */
    .flex.items-center.justify-between {
        flex-wrap: wrap;
        gap: 0.75rem;
    }
    
    .flex.items-center.gap-3,
    .flex.items-center.gap-4 {
        flex-wrap: wrap;
        gap: 0.5rem !important;
    }
}

/* ============================================
   Header / Top Bar Fixes
   ============================================ */

@media (max-width: 768px) {
    /* Header adjustments */
    .admin-main > header,
    main.admin-main > header,
    header.sticky {
        padding: 0.75rem 1rem !important;
    }
    
    .admin-main > header h1,
    main.admin-main > header h1,
    header h1 {
        font-size: 1rem !important;
        line-height: 1.25;
        white-space: normal;
        word-break: break-word;
    }
    
    .admin-main > header p,
    main.admin-main > header p,
    header p {
        font-size: 0.7rem !important;
        white-space: normal;
    }
    
    /* Header flex container - stack on very small screens */
    header > .flex {
        gap: 0.5rem !important;
        flex-wrap: wrap;
    }
    
    /* Header right side - user info, logout, etc */
    header .flex.items-center.gap-4 {
        gap: 0.25rem !important;
    }
    
    header .flex.items-center.gap-3 {
        gap: 0.5rem !important;
    }
    
    /* Hide verbose elements on mobile */
    .hidden.sm\\:block {
        display: none !important;
    }
    
    /* Smaller avatar on mobile */
    header .w-9.h-9,
    header .w-10.h-10 {
        width: 32px !important;
        height: 32px !important;
        font-size: 0.75rem !important;
        min-width: 32px !important;
        min-height: 32px !important;
    }
    
    /* Notification bell */
    #notification-container {
        margin-right: 0 !important;
    }
    
    /* Logout button on mobile */
    #logout-btn {
        padding: 0.5rem !important;
        font-size: 0.875rem !important;
    }
    
    /* Border separator */
    .pl-4.border-l {
        padding-left: 0.5rem !important;
    }
}

/* ============================================
   Form Container Fixes
   ============================================ */

@media (max-width: 768px) {
    /* Main content padding */
    .admin-main > .p-6,
    .admin-main > main > .p-6 {
        padding: 1rem;
    }
    
    /* Card/Section containers */
    .bg-white.rounded-lg,
    .bg-white.rounded-xl,
    .bg-white.shadow {
        padding: 1rem;
        margin-left: 0;
        margin-right: 0;
    }
    
    /* Form sections */
    section.bg-white {
        padding: 1rem;
    }
    
    /* Grid layouts - stack on mobile */
    .grid.grid-cols-2 {
        grid-template-columns: 1fr;
    }
    
    .grid.md\\:grid-cols-2,
    .grid.md\\:grid-cols-3,
    .grid.md\\:grid-cols-4 {
        grid-template-columns: 1fr;
    }
    
    /* Flex layouts - wrap on mobile */
    .flex.gap-4,
    .flex.gap-6 {
        flex-wrap: wrap;
    }
}

/* ============================================
   Form Element Fixes
   ============================================ */

@media (max-width: 768px) {
    /* Input fields */
    input[type="text"],
    input[type="email"],
    input[type="number"],
    input[type="password"],
    input[type="search"],
    select,
    textarea {
        font-size: 16px; /* Prevents zoom on iOS */
        width: 100%;
        max-width: 100%;
    }
    
    /* Buttons */
    button,
    .btn,
    a.btn {
        min-height: 44px; /* Touch-friendly */
        padding-left: 1rem;
        padding-right: 1rem;
    }
    
    /* Button groups */
    .flex.gap-2 > button,
    .flex.gap-3 > button {
        flex: 1;
        min-width: 0;
    }
    
    /* Size selector chips */
    .flex.flex-wrap.gap-2 > div,
    .flex.flex-wrap.gap-2 > button {
        flex-shrink: 0;
    }
}

/* ============================================
   Table Fixes
   ============================================ */

@media (max-width: 768px) {
    /* Table container */
    .overflow-x-auto {
        margin: 0 -1rem;
        padding: 0 1rem;
        width: calc(100% + 2rem);
    }
    
    /* Table cells */
    table th,
    table td {
        padding: 0.5rem 0.75rem;
        font-size: 0.8rem;
        white-space: nowrap;
    }
    
    /* Table - hide less important columns on mobile */
    table th:nth-child(n+5),
    table td:nth-child(n+5) {
        display: none;
    }
}

/* ============================================
   Messages Page Specific Fixes
   ============================================ */

@media (max-width: 768px) {
    /* Messages container - stack conversation list and chat */
    #messages-page .grid {
        display: flex;
        flex-direction: column;
        height: auto !important;
    }
    
    /* Customer list sidebar - w-80 is too wide */
    .w-80.border-r,
    .w-80.flex-shrink-0,
    [class*="w-80"] {
        width: 100% !important;
        max-height: 200px;
        overflow-y: auto;
        border-right: none !important;
        border-bottom: 1px solid #e5e7eb !important;
    }
    
    /* Chat area */
    .flex-1.flex.flex-col {
        min-height: 400px;
    }
    
    /* Messages list height */
    #messages-list {
        max-height: 300px !important;
        min-height: 200px;
    }
    
    /* Message input area */
    .flex.space-x-3 {
        flex-wrap: wrap;
        gap: 0.5rem;
    }
    
    /* Chat header - customer info */
    .px-6.py-4 {
        padding: 0.75rem 1rem !important;
    }
    
    /* Customer info in header */
    .flex.items-center.space-x-3 {
        gap: 0.5rem !important;
    }
    
    /* Customer search input */
    #customer-search {
        width: 100% !important;
    }
    
    /* Archive toggle tabs */
    .flex.border-b button {
        flex: 1;
        padding: 0.5rem;
        font-size: 0.75rem;
    }
}

/* ============================================
   Returns Page Specific Fixes
   ============================================ */

@media (max-width: 768px) {
    /* Search and filter row - stack vertically */
    .bg-white.rounded-lg.shadow.p-4 .flex.items-center.justify-between {
        flex-direction: column;
        align-items: stretch !important;
        gap: 1rem;
    }
    
    .bg-white.rounded-lg.shadow.p-4 .flex.items-center.gap-3 {
        flex-direction: column;
        width: 100%;
    }
    
    /* Search input - override w-80 */
    #search {
        width: 100% !important;
    }
    
    /* Filter dropdown */
    #filter-status {
        width: 100% !important;
    }
    
    /* Count text - centered on mobile */
    .text-sm.text-gray-500 {
        text-align: center;
    }
    
    /* Returns table - show only essential columns */
    .min-w-full.text-sm th:nth-child(4),
    .min-w-full.text-sm td:nth-child(4),
    .min-w-full.text-sm th:nth-child(6),
    .min-w-full.text-sm td:nth-child(6) {
        display: none;
    }
    
    /* Modal footer buttons - wrap */
    .px-5.py-3.border-t.flex {
        flex-wrap: wrap;
        gap: 0.5rem !important;
        justify-content: center !important;
    }
    
    .px-5.py-3.border-t.flex button {
        flex: 1;
        min-width: calc(50% - 0.5rem);
        text-align: center;
    }
}

/* ============================================
   Add Pre-Design Product Fixes
   ============================================ */

@media (max-width: 768px) {
    /* Main content padding */
    main.p-4 {
        padding: 1rem !important;
    }
    
    /* Grid layout - stack on mobile */
    .grid.grid-cols-1.lg\\:grid-cols-3 {
        display: flex;
        flex-direction: column;
    }
    
    .lg\\:col-span-2 {
        grid-column: span 1;
    }
    
    /* Form cards */
    .bg-white.p-6.rounded-lg.shadow-md {
        padding: 1rem !important;
    }
    
    /* Two column grids - stack on mobile */
    .grid.grid-cols-1.md\\:grid-cols-2 {
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }
    
    /* Size input row - new size input and button */
    .flex.items-center.gap-2 {
        flex-wrap: wrap;
    }
    
    #new-size-input {
        width: 100% !important;
        margin-bottom: 0.5rem;
    }
    
    #add-size-btn {
        width: 100%;
    }
    
    /* Per size section - generate sizes row */
    #per-size-section .flex.gap-2 {
        flex-direction: column;
    }
    
    #per-size-section .flex.gap-2 input,
    #per-size-section .flex.gap-2 button {
        width: 100% !important;
    }
    
    #sizes-generate {
        width: 100% !important;
    }
    
    #generate-sizes-btn {
        width: 100% !important;
    }
    
    /* Apply qty row */
    #apply-qty-input {
        width: 100% !important;
    }
    
    /* Thumbnail gallery */
    .thumb {
        width: 60px !important;
        height: 60px !important;
    }
    
    /* Image upload area */
    .border-dashed.border-2 {
        padding: 1rem !important;
    }
    
    /* Size selector chips - ensure they wrap */
    #sizes-tags {
        max-width: 100%;
    }
    
    /* Per-size table */
    #per-size-section table {
        font-size: 0.75rem;
    }
    
    #per-size-section table th,
    #per-size-section table td {
        padding: 0.5rem;
    }
    
    #per-size-section table input {
        width: 60px !important;
        padding: 0.25rem;
        font-size: 0.75rem;
    }
}

/* ============================================
   Inventory Page Fixes
   ============================================ */

@media (max-width: 768px) {
    /* Filter section - wrap all items */
    .flex.flex-wrap.items-center.gap-3 {
        flex-direction: column;
        align-items: stretch !important;
        width: 100%;
    }
    
    /* Search input */
    #search-input {
        width: 100% !important;
    }
    
    /* Filter dropdowns */
    #category-filter,
    #status-filter,
    #stock-filter {
        width: 100% !important;
    }
    
    /* Action buttons row */
    .flex.gap-2.ml-auto {
        flex-direction: column;
        width: 100%;
        margin-left: 0 !important;
        gap: 0.5rem !important;
    }
    
    .flex.gap-2.ml-auto > button,
    .flex.gap-2.ml-auto > a {
        width: 100%;
        justify-content: center;
        text-align: center;
    }
    
    /* Dropdown menus */
    .dropdown-menu,
    [class*="absolute"][class*="right-0"][class*="bg-white"] {
        position: fixed !important;
        left: 1rem !important;
        right: 1rem !important;
        width: auto !important;
        max-width: calc(100vw - 2rem) !important;
        z-index: 50 !important;
    }
    
    /* Product cards grid */
    #products-grid {
        grid-template-columns: 1fr !important;
    }
    
    /* Table view adjustments */
    #products-table {
        font-size: 0.75rem;
    }
    
    #products-table th,
    #products-table td {
        padding: 0.5rem;
    }
}

/* ============================================
   Modal Fixes
   ============================================ */

@media (max-width: 768px) {
    /* Modal overlay */
    .modal-overlay,
    [class*="fixed inset-0"][class*="bg-black"] {
        padding: 0.5rem;
    }
    
    /* Modal content */
    .modal-content,
    .modal-overlay > div,
    [class*="bg-white"][class*="rounded-lg"][class*="shadow"] {
        max-width: 100%;
        max-height: 90vh;
        margin: 0;
        border-radius: 0.75rem;
    }
    
    /* Modal header */
    .modal-header {
        padding: 1rem;
        position: sticky;
        top: 0;
        background: white;
        z-index: 10;
    }
    
    /* Modal body */
    .modal-body {
        padding: 1rem;
        overflow-y: auto;
    }
    
    /* Modal footer */
    .modal-footer {
        padding: 1rem;
        position: sticky;
        bottom: 0;
        background: white;
        border-top: 1px solid #e5e7eb;
    }
}

/* ============================================
   Utility Classes for Mobile
   ============================================ */

@media (max-width: 768px) {
    /* Hide on mobile */
    .hide-mobile {
        display: none !important;
    }
    
    /* Show on mobile */
    .show-mobile {
        display: block !important;
    }
    
    /* Full width on mobile */
    .mobile-full-width {
        width: 100% !important;
    }
    
    /* Stack on mobile */
    .mobile-stack {
        flex-direction: column !important;
    }
    
    /* Smaller text on mobile */
    .mobile-text-sm {
        font-size: 0.875rem !important;
    }
    
    .mobile-text-xs {
        font-size: 0.75rem !important;
    }
    
    /* Reduced padding on mobile */
    .mobile-p-2 {
        padding: 0.5rem !important;
    }
    
    .mobile-p-3 {
        padding: 0.75rem !important;
    }
}

/* ============================================
   Touch-friendly improvements
   ============================================ */

@media (max-width: 768px) {
    /* Larger tap targets */
    a, button, [role="button"] {
        min-height: 44px;
        min-width: 44px;
    }
    
    /* Better spacing for touch */
    .nav-link {
        padding: 12px 16px;
        margin-bottom: 4px;
    }
    
    /* Checkboxes and radios */
    input[type="checkbox"],
    input[type="radio"] {
        width: 20px;
        height: 20px;
    }
}

/* ============================================
   Fix specific overflow issues
   ============================================ */

/* Prevent buttons from overflowing */
.flex.items-center.gap-4 > button,
.flex.items-center.gap-3 > button,
.flex.items-center.gap-2 > button {
    flex-shrink: 0;
}

/* Prevent long text from breaking layout */
.truncate-mobile {
    max-width: 100%;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

@media (max-width: 768px) {
    /* Header title truncation */
    .admin-main h1,
    .admin-main h2 {
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        max-width: calc(100vw - 150px);
    }
}
